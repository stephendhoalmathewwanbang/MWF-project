<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MWF Stock Update</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="css/mwf.css">
</head>
<body>
  <!-- Navigation Bar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-warning">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">MWF Warehouse</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="warehouse-dashboard.html">Dashboard</a></li>
          <li class="nav-item"><a class="nav-link" href="inventory.html">Current Inventory</a></li>
          <li class="nav-item"><a class="nav-link" href="delivery-logs.html">Delivery Logs</a></li>
          <li class="nav-item"><a class="nav-link active" href="stock-update.html">Update Stock</a></li>
          <li class="nav-item"><a class="nav-link" href="suppliers.html">Suppliers</a></li>
          <li class="nav-item"><a class="nav-link" href="index.html">Logout</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <div class="container mt-4">
    <h2 class="mb-4">Stock Update</h2>

    <!-- Action Buttons -->
    <div class="row mb-4">
      <div class="col-md-6">
        <button class="btn btn-success btn-lg me-2" onclick="showAddStockModal()">
          <i class="bi bi-plus-circle"></i> Add New Stock
        </button>
        <button class="btn btn-primary btn-lg" onclick="showUpdateStockModal()">
          <i class="bi bi-pencil"></i> Update Existing Stock
        </button>
      </div>
    </div>

    <!-- Quick Summary -->
    <div class="row g-4 mb-4">
      <div class="col-md-3">
        <div class="card text-white bg-success">
          <div class="card-body">
            <h5 class="card-title">Added Today</h5>
            <p class="card-text display-6">25</p>
            <small>Items added</small>
          </div>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card text-white bg-info">
          <div class="card-body">
            <h5 class="card-title">Updated Today</h5>
            <p class="card-text display-6">12</p>
            <small>Items updated</small>
          </div>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card text-white bg-warning">
          <div class="card-body">
            <h5 class="card-title">Low Stock</h5>
            <p class="card-text display-6">8</p>
            <small>Need attention</small>
          </div>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card text-white bg-primary">
          <div class="card-body">
            <h5 class="card-title">Total Value</h5>
                            <p class="card-text display-6">UGX 475,000,000</p>
            <small>Inventory worth</small>
          </div>
        </div>
      </div>
    </div>

    <!-- Recent Stock Updates -->
    <div class="card">
      <div class="card-header">
        <h5 class="mb-0">Recent Stock Updates</h5>
      </div>
      <div class="card-body">
        <div class="table-responsive">
          <table class="table table-hover">
            <thead class="table-light">
              <tr>
                <th>Date & Time</th>
                <th>Product</th>
                <th>Action</th>
                <th>Previous Qty</th>
                <th>New Qty</th>
                <th>Change</th>
                <th>Updated By</th>
                <th>Notes</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>2024-01-15 10:30 AM</td>
                <td>Timber</td>
                <td><span class="badge bg-success">Added</span></td>
                <td>100</td>
                <td>125</td>
                <td class="text-success">+25</td>
                <td>Mike Wilson</td>
                <td>New delivery from ABC Supplier</td>
              </tr>
              <tr>
                <td>2024-01-15 09:15 AM</td>
                <td>Wood Poles</td>
                <td><span class="badge bg-success">Added</span></td>
                <td>0</td>
                <td>100</td>
                <td class="text-success">+100</td>
                <td>Mike Wilson</td>
                <td>Restocked from XYZ Timber</td>
              </tr>
              <tr>
                <td>2024-01-15 08:45 AM</td>
                <td>Sofa Set</td>
                <td><span class="badge bg-warning">Updated</span></td>
                <td>10</td>
                <td>5</td>
                <td class="text-danger">-5</td>
                <td>Mike Wilson</td>
                <td>Sales transaction</td>
              </tr>
              <tr>
                <td>2024-01-15 08:30 AM</td>
                <td>Dining Table</td>
                <td><span class="badge bg-warning">Updated</span></td>
                <td>20</td>
                <td>15</td>
                <td class="text-danger">-5</td>
                <td>Mike Wilson</td>
                <td>Sales transaction</td>
              </tr>
              <tr>
                <td>2024-01-15 08:00 AM</td>
                <td>Pine Wood</td>
                <td><span class="badge bg-warning">Updated</span></td>
                <td>15</td>
                <td>8</td>
                <td class="text-danger">-7</td>
                <td>Mike Wilson</td>
                <td>Sales transaction</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- Add New Stock Modal -->
  <div class="modal fade" id="addStockModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Add New Stock</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <form id="addStockForm">
            <div class="row g-3">
              <div class="col-md-6">
                <label for="newProductName" class="form-label">Product Name</label>
                <input type="text" class="form-control" id="newProductName" required>
              </div>
              <div class="col-md-6">
                <label for="newProductType" class="form-label">Product Type</label>
                <select class="form-select" id="newProductType" required>
                  <option value="">Select Type</option>
                  <option value="wood">Wood</option>
                  <option value="furniture">Furniture</option>
                  <option value="poles">Poles</option>
                </select>
              </div>
              <div class="col-md-6">
                <label for="newQuantity" class="form-label">Quantity</label>
                <input type="number" class="form-control" id="newQuantity" min="1" required>
              </div>
              <div class="col-md-6">
                <label for="newUnitPrice" class="form-label">Unit Price</label>
                <input type="number" class="form-control" id="newUnitPrice" min="0" step="0.01" required>
              </div>
              <div class="col-md-6">
                <label for="newSupplier" class="form-label">Supplier</label>
                <select class="form-select" id="newSupplier" required>
                  <option value="">Select Supplier</option>
                  <option value="ABC Supplier">ABC Supplier</option>
                  <option value="XYZ Timber">XYZ Timber</option>
                  <option value="Furniture Co.">Furniture Co.</option>
                </select>
              </div>
              <div class="col-md-6">
                <label for="newQuality" class="form-label">Quality</label>
                <select class="form-select" id="newQuality">
                  <option value="high">High</option>
                  <option value="medium">Medium</option>
                  <option value="low">Low</option>
                </select>
              </div>
              <div class="col-md-6">
                <label for="newColor" class="form-label">Color (Optional)</label>
                <input type="text" class="form-control" id="newColor">
              </div>
              <div class="col-md-6">
                <label for="newMeasurements" class="form-label">Measurements (Optional)</label>
                <input type="text" class="form-control" id="newMeasurements" placeholder="e.g., 2m x 0.5m">
              </div>
              <div class="col-12">
                <label for="newNotes" class="form-label">Notes</label>
                <textarea class="form-control" id="newNotes" rows="3" placeholder="Additional notes about the stock"></textarea>
              </div>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-success" onclick="saveNewStock()">Add Stock</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Update Existing Stock Modal -->
  <div class="modal fade" id="updateStockModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Update Existing Stock</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <form id="updateStockForm">
            <div class="row g-3">
              <div class="col-md-6">
                <label for="selectProduct" class="form-label">Select Product</label>
                <select class="form-select" id="selectProduct" onchange="loadProductDetails()" required>
                  <option value="">Choose Product</option>
                  <option value="timber">Timber</option>
                  <option value="sofa">Sofa Set</option>
                  <option value="poles">Wood Poles</option>
                  <option value="dining">Dining Table</option>
                  <option value="pine">Pine Wood</option>
                </select>
              </div>
              <div class="col-md-6">
                <label for="currentQuantity" class="form-label">Current Quantity</label>
                <input type="number" class="form-control" id="currentQuantity" readonly>
              </div>
              <div class="col-md-6">
                <label for="updateType" class="form-label">Update Type</label>
                <select class="form-select" id="updateType" onchange="toggleQuantityFields()" required>
                  <option value="">Select Type</option>
                  <option value="add">Add Stock</option>
                  <option value="remove">Remove Stock</option>
                  <option value="set">Set Quantity</option>
                </select>
              </div>
              <div class="col-md-6">
                <label for="updateQuantity" class="form-label">Quantity Change</label>
                <input type="number" class="form-control" id="updateQuantity" min="0">
              </div>
              <div class="col-md-6">
                <label for="updateUnitPrice" class="form-label">Update Unit Price</label>
                <input type="number" class="form-control" id="updateUnitPrice" min="0" step="0.01">
              </div>
              <div class="col-md-6">
                <label for="updateReason" class="form-label">Reason for Update</label>
                <select class="form-select" id="updateReason" required>
                  <option value="">Select Reason</option>
                  <option value="delivery">New Delivery</option>
                  <option value="sale">Sale Transaction</option>
                  <option value="damage">Damage/Loss</option>
                  <option value="adjustment">Stock Adjustment</option>
                </select>
              </div>
              <div class="col-12">
                <label for="updateNotes" class="form-label">Notes</label>
                <textarea class="form-control" id="updateNotes" rows="3" placeholder="Additional notes about the update"></textarea>
              </div>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary" onclick="saveStockUpdate()">Update Stock</button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Product database with current quantities
    const productDatabase = {
      timber: { name: 'Timber', quantity: 125, price: 250 },
      sofa: { name: 'Sofa Set', quantity: 5, price: 1200 },
      poles: { name: 'Wood Poles', quantity: 0, price: 95 },
      dining: { name: 'Dining Table', quantity: 15, price: 800 },
      pine: { name: 'Pine Wood', quantity: 8, price: 180 }
    };

    function showAddStockModal() {
      new bootstrap.Modal(document.getElementById('addStockModal')).show();
    }

    function showUpdateStockModal() {
      new bootstrap.Modal(document.getElementById('updateStockModal')).show();
    }

    function loadProductDetails() {
      const productId = document.getElementById('selectProduct').value;
      if (productId && productDatabase[productId]) {
        const product = productDatabase[productId];
        document.getElementById('currentQuantity').value = product.quantity;
      }
    }

    function toggleQuantityFields() {
      const updateType = document.getElementById('updateType').value;
      const quantityField = document.getElementById('updateQuantity');
      
      if (updateType === 'add') {
        quantityField.placeholder = 'Quantity to add';
      } else if (updateType === 'remove') {
        quantityField.placeholder = 'Quantity to remove';
      } else if (updateType === 'set') {
        quantityField.placeholder = 'New total quantity';
      }
    }

    function saveNewStock() {
      // Save new stock functionality would be implemented here
      alert('New stock added successfully!');
      bootstrap.Modal.getInstance(document.getElementById('addStockModal')).hide();
      // Refresh the page or update the table
      location.reload();
    }

    function saveStockUpdate() {
      // Save stock update functionality would be implemented here
      alert('Stock updated successfully!');
      bootstrap.Modal.getInstance(document.getElementById('updateStockModal')).hide();
      // Refresh the page or update the table
      location.reload();
    }
  </script>
</body>
</html> 